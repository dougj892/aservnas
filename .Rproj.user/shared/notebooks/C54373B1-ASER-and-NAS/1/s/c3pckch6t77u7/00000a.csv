"0",""
"0","# drop the one row with missing values for weights"
"0","ihds <- ihds %>% filter(!is.na(WT))"
"0",""
"0","# create variable for ASER at level 4"
"0","ihds <- ihds %>% mutate(ASER4 = (TA8B ==4)) %>% mutate(State = as_factor(STATEID))"
"0",""
"0","# use the survey package to set the survey design.  I will use the ihds_svy object to calculate CIs"
"0","ihds_svy <- svydesign(id =~ psu_expanded + hh_expanded, weights =~ WT, data = ihds)"
"0",""
"0","# use statsby to get the % of selected kids who achieve level 4 on ASER reading by state"
"0","# note that I am not sure if subsetting within statsby is kosher, but the standard errors should be ok "
"0","# more or less ok regardless"
"0","ihds_scores <- svyby(~ASER4, ~State, subset(ihds_svy, !is.na(TA8B) & (CS4 == 2 | CS4 == 3) & (TA4 >= 2 & TA4 <= 5) & (URBAN2011 == 0)), svymean, na.rm=TRUE)"
"0",""
"0","# convert to a tibble"
"0","ihds_scores <- as.tibble(ihds_scores) %>% select(State, ASER4TRUE, se.ASER4TRUE) %>% rename(ihds = ASER4TRUE, ihds_se = se.ASER4TRUE)"
"2","`as.tibble()` is deprecated as of tibble 2.0.0.
Please use `as_tibble()` instead.
The signature and semantics have changed, see `?as_tibble`.
[90mThis warning is displayed once every 8 hours.[39m
[90mCall `lifecycle::last_warnings()` to see where this warning was generated.[39m"
"0","# Unsure, but I think this gets rid of the space and number at the end of the state name"
"0","ihds_scores$State <- sub(""...$"", """", ihds_scores$State)"
"0",""
"0","# replace the standard errors with NA is SE == 0"
"0","ihds_scores$ihds[ihds_scores$ihds_se == 0] <- NA"
"0",""
"0","# replace Orissa with Odisha in state "
"0","ihds_scores$State[ihds_scores$State == ""Orissa""] <- ""Odisha"""
"0","ihds_scores$ihds <- round(ihds_scores$ihds, 3)*100"
"0",""
